{% extends 'fire_intel/base.html' %}
{% block content %}
{% load static %}
{% load humanize %}


<!-- Sidebar -->
<div id="sidebar" class="leaflet-sidebar collapsed">

    <!-- nav tabs -->
    <div class="leaflet-sidebar-tabs">
        <!-- top aligned tabs -->
        <ul role="tablist">
            <li><a href="#home" role="tab"><i class="fas fa-home text-white"></i></a></li>
            <li><a href="#ground" role="tab"><i class="fas fa-truck-pickup text-white"></i></a></li>
            <li><a href="#aviation" role="tab"><i class="fas fa-plane text-white fa-rotate-45"></i></a></li>
            <li><a href="#statistics" role="tab"><i class="fas fa-chart-bar text-white"></i></a></li>
            <li><a href="#twitter" role="tab"><i class="fab fa-twitter text-white"></i></a></li>
        </ul>

        <!-- bottom aligned tabs -->
        <ul role="tablist">
            <li>
                {% if user.is_authenticated %}
                <a href="{% url 'profile' %}">
                    <i class="fas fa-user-circle user-green align-middle"></i>
                </a>
                {% else %}
                <a href="{% url 'login' %}" >
                    <i class="fas fa-user-circle text-muted align-middle"></i></a>
                {% endif %}
            </li>
        </ul>
    </div>

    <div class="leaflet-sidebar-content">
        <!-- home panel -->
        <div class="leaflet-sidebar-pane" id="home">
            <h1 class="leaflet-sidebar-header">Situation Snapshot
                <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
            </h1>
            <!-- date row -->
            <p class="mt-2 date-update">Last Updated: {{ updated_date_txt }}</p>
            <p class="text-muted mb-2 date-disclaim mb-2">This page is generally updated once a day, usually before 0900 PT</p>

{#                <img class="img-responsive align-middle text-center nav-img" src="{%  static '/images/em_dnr_logo_wildfire.png' %}" alt="DNR Logo" style="max-height: 80px">#}
            <!-- 1st row -->
            <div class="row">
                <div class="col-6 pr-2 mt-2">
                    <div class="card rounded-0 h-100">
                        <div class="card-body text-center text-white">
                            <h5 class="card-num">{{ preparedness_level_national }}</h5>
                            <small class="small-title">National Level</small>
                        </div>
                    </div>
                </div>
                
                <div class="col-6 pl-2 mt-2">
                    <div class="card rounded-0 h-100">
                        <div class="card-body text-center text-white">
                            <h5 class="card-num">{{ preparedness_level_nw}}</h5>
                            <small class="small-title">Northwest Level</small>
                        </div>
                    </div>
                </div>
            </div> <!-- /end 1st row -->
            
            <!-- 2nd row -->
            <div class="row my-2">
                <div class="col-6 pr-2">
                    <div class="card rounded-0 h-100">
                        <div class="card-body text-center text-white">
                            <h5 class="card-num">{{ type_1_teams_assigned }}</h5>
                            <small class="small-title">Type 1 Teams</small>
                        </div>
                    </div>
                </div>
                
                <div class="col-6 pl-2">
                    <div class="card rounded-0 h-100">
                        <div class="card-body text-center text-white">
                            <h5 class="card-num">{{ type_2_teams_assigned }}</h5>
                            <small class="small-title">Type 2 Teams</small>
                        </div>
                    </div>
                </div>
            </div> <!-- /end 2nd row -->
            
            <!-- 3rd row row -->
            <div class="row my-2">
                <div class="col-6 pr-2">
                    <div class="card rounded-0 h-100 text-white">
                        <div class="card-body text-center">
                            <h5 class="card-num">{{ wa_large_fires }}</h5>
                            <small class="small-title">WA Large Fires</small>
                        </div>
                    </div>
                </div>
            
                <div class="col-6 pl-2">
                    <div class="card rounded-0 h-100 text-white">
                        <div class="card-body text-center">
                            <h5 class="card-num">{{ dnr_ia_fires }}</h5>
                            <small class="small-title">DNR IA Fires</small>
                        </div>
                    </div>
                </div>
            </div> <!-- /end 3rd row -->
        </div> <!-- /end panel -->

        <!-- resources panel -->
        <div class="leaflet-sidebar-pane" id="ground">
            <h1 class="leaflet-sidebar-header">Ground Resources
                <span class="leaflet-sidebar-close"><i class="fas fa-caret-left"></i></span>
            </h1>
            <!-- date row -->
            <p class="date-update mt-2">Last Updated: {{ updated_date_txt }}</p>
            <p class="text-muted date-disclaim mb-2">This page is generally updated once a day, usually before 0900 PT</p>

            <!-- engines/crews table -->
            <div class="table-responsive">
                <table class="table table-sm table-striped table-hover table-bordered mb-2">
                    <caption class="table-caption"><i class="fas fa-truck-pickup"></i>&nbsp; Engines and Crews</caption>
                    <thead>
                        <tr>
                            <th scope="col" rowspan="2">Region</th>
                            <th scope="col" colspan="2" class="text-center">Available in Region</th>
                            <th scope="col" colspan="2" class="text-center">Available out of Region</th>
                        </tr>
                        <tr>
                            <th class="text-center">Engines</th>
                            <th class="text-center">Crews</th>
                            <th class="text-center">Engines</th>
                            <th class="text-center">Crews</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">Northeast</th>
                            <td class="text-center">{{ ne_committed_engines }}</td>
                            <td class="text-center">{{ ne_committed_crews }}</td>
                            <td class="text-center">{{ ne_available_engines }}</td>
                            <td class="text-center">{{ ne_available_crews }}</td>
                        </tr>
                        <tr>
                            <th scope="row">Southeast</th>
                            <td class="text-center">{{ se_committed_engines }}</td>
                            <td class="text-center">{{ se_committed_crews }}</td>
                            <td class="text-center">{{ se_available_engines }}</td>
                            <td class="text-center">{{ se_available_crews }}</td>
                        </tr>
                        <tr>
                            <th scope="row">Northwest</th>
                            <td class="text-center">{{ nw_committed_engines }}</td>
                            <td class="text-center">{{ nw_committed_crews }}</td>
                            <td class="text-center">{{ nw_available_engines }}</td>
                            <td class="text-center">{{ nw_available_crews }}</td>
                        </tr>
                        <tr>
                            <th scope="row">Olympic</th>
                            <td class="text-center">{{ oly_committed_engines }}</td>
                            <td class="text-center">{{ oly_committed_crews }}</td>
                            <td class="text-center">{{ oly_available_engines }}</td>
                            <td class="text-center">{{ oly_available_crews }}</td>
                        </tr>
                        <tr>
                            <th scope="row">South Puget</th>
                            <td class="text-center">{{ sps_committed_engines }}</td>
                            <td class="text-center">{{ sps_committed_crews }}</td>
                            <td class="text-center">{{ sps_available_engines }}</td>
                            <td class="text-center">{{ sps_available_crews }}</td>
                        </tr>
                        <tr>
                            <th scope="row">Pacific Cascade</th>
                            <td class="text-center">{{ pc_committed_engines }}</td>
                            <td class="text-center">{{ pc_committed_crews }}</td>
                            <td class="text-center">{{ pc_available_engines }}</td>
                            <td class="text-center">{{ pc_available_crews }}</td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- /end 1st table row -->

            <a href="https://gacc.nifc.gov/nwcc/content/products/intelligence/crews.pdf" class="btn btn-sm rounded-0 border-0 btn-block text-white text-left dnr-red-bg nwcc-link" target="_blank">Northwest Hotshot Crews<i class="fas fa-chevron-right text-white chevron-fix" ></i></a>
        </div>

        <!-- aviation panel -->
        <div class="leaflet-sidebar-pane" id="aviation">
            <h1 class="leaflet-sidebar-header">Aviation Resources
                <span class="leaflet-sidebar-close"><i class="fas fa-caret-left"></i></span>
            </h1>
            <!-- date row -->
            <p class="date-update mt-2">Last Updated: {{ updated_date_txt }}</p>
            <p class="text-muted date-disclaim mb-2">This page is generally updated once a day, usually before 0900 PT</p>

            <!-- aviation row-->
            <div class="table-responsive">
                <table class="table table-sm table-striped table-hover table-bordered mb-2">
                    <caption class="table-caption"><i class="fas fa-plane fa-rotate-45"></i> &nbsp; Rotors and Tankers</caption>
                    <thead>
                        <tr>
                            <th>Location</th>
                            <th class="text-center">Rotor</th>
                            <th class="text-center">Fire Boss</th>
                            <th class="text-center">Air Attack</th>
                            <th class="text-center">LAT</th>
                            <th class="text-center">VLAT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">Westside</th>
                            <td class="text-center">{{ westside_rotors }}</td>
                            <td class="text-center">{{ westside_firebosses }}</td>
                            <td class="text-center">{{ westside_atgs }}</td>
                            <td class="text-center">-</td>
                            <td class="text-center">-</td>
                        </tr>
                        <tr>
                            <th scope="row">Eastside</th>
                            <td class="text-center">{{ eastside_rotors }}</td>
                            <td class="text-center">{{ eastside_firebosses }}</td>
                            <td class="text-center">{{ eastside_atgs }}</td>
                            <td class="text-center">-</td>
                            <td class="text-center">-</td>
                        </tr>
                        <tr>
                            <th scope="row">In GACC</th>
                            <td class="text-center">-</td>
                            <td class="text-center">-</td>
                            <td class="text-center">-</td>
                            <td class="text-center">{{ in_region_lat }}</td>
                            <td class="text-center">{{ in_region_vlat }}</td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- /end 2nd table row -->

            <a href="https://gacc.nifc.gov/nwcc/content/products/intelligence/Aviation.pdf" class="btn btn-sm rounded-0 border-0 btn-block text-white text-left dnr-red-bg nwcc-link" target="_blank">Northwest Aviation Report<i class="fas fa-chevron-right text-white chevron-fix" ></i></a>
            <a href="https://firecrew.us/" class="btn btn-sm rounded-0 border-0 btn-block text-white text-left dnr-red-bg nwcc-link" target="_blank">National Rapellers<i class="fas fa-chevron-right text-white chevron-fix" ></i></a>
            <a href="https://www.nifc.gov/smokejumper/reports/smjrpt.php" class="btn btn-sm rounded-0 border-0 btn-block text-white text-left dnr-red-bg nwcc-link" target="_blank">National Smokejumpers<i class="fas fa-chevron-right text-white chevron-fix" ></i></a>
        </div> <!-- /end panel -->

        <!-- stats panel -->
        <div class="leaflet-sidebar-pane" id="statistics">
            <h1 class="leaflet-sidebar-header">Fire Statistics
                <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
            </h1>
            <!-- date row -->
            <p class="date-update mt-2">Last Updated: {{ updated_date_txt }}</p>
            <p class="text-muted date-disclaim mb-2">This page is generally updated once a day, usually before 0900 PT </p>

            <!-- summary table -->
            <div class="table-responsive">
                <table class="table table-sm table-striped table-hover table-bordered mb-2">
                    <caption style="caption-side: top; padding-bottom: 2px;font-size: 1.5em;"><i class="fas fa-table"></i>&nbsp; Summary Statistics</caption>
                    <thead>
                        <tr>
                            <th>Location</th>
                            <th class="text-center">DNR Responses</th>
                            <th class="text-center">DNR Fires</th>
                            <th class="text-center">DNR Acres Burned</th>
                            <th class="text-center">All-Lands Acres Burned</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">Westside</th>
                            <td class="text-center">{{ westside_dnr_responses_count|intcomma }}</td>
                            <td class="text-center">{{ westside_dnr_fire_count|intcomma }}</td>
                            <td class="text-center">{{ westside_dnr_fire_acres|intcomma }} ac.</td>
                            <td class="text-center">{{ westside_all_fire_acres|intcomma }} ac.</td>

                        </tr>
                        <tr>
                            <th scope="row">Eastside</th>
                            <td class="text-center">{{ eastside_dnr_responses_count|intcomma }}</td>
                            <td class="text-center">{{ eastside_dnr_fire_count|intcomma }}</td>
                            <td class="text-center">{{ eastside_dnr_fire_acres|intcomma }} ac.</td>
                            <td class="text-center">{{ eastside_all_fire_acres|intcomma }} ac.</td>
                        </tr>
                        <tr>
                            <th scope="row">Totals</th>
                            <td class="text-center">{{sum_dnr_response_count|intcomma}}</td>
                            <td class="text-center">{{sum_dnr_fire_count|intcomma}}</td>
                            <td class="text-center">{{sum_dnr_fire_acres|intcomma}} ac.</td>
                            <td class="text-center">{{sum_all_fire_acres|intcomma}} ac.</td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- /end 1st table row -->
        </div> <!-- /end panel -->

        <!-- twitter panel -->
        <div class="leaflet-sidebar-pane" id="twitter">
            <h1 class="leaflet-sidebar-header">DNR Fire Twitter
                <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
            </h1>
            <div class="row">
                <div class="col-12 twit-column">
                    <a class="twitter-timeline" data-height="90vh" data-width="100%" data-lang="en" data-theme="light" data-chrome="noheader nofooter" data-link-color="#D0092D" href="https://twitter.com/waDNR_fire?ref_src=twsrc%5Etfw" >Tweets by waDNR_fire</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>
            </div> <!-- /end 1st row -->
        </div> <!-- /end panel -->
    </div> <!-- /end sidebar content -->
</div> <!-- /end sidebar -->

<!-- Map -->
<div id="mapdiv"></div>


{% endblock %}